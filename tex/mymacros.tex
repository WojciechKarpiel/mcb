% vim:set errorformat="":
%\usepackage[pass]{geometry}
\usepackage{ae,aecompl,amsbsy,amssymb,amsmath,amsfonts}
\usepackage{colortbl}
\usepackage{marginnote}
\usepackage{wrapfig}
\usepackage{array}
\usepackage{tabularx}
\usepackage{environ}
\usepackage{bussproofs}
\usepackage{exercise}
\usepackage{imakeidx}
\usepackage[normalem]{ulem}
\usepackage{multicol}
\usepackage{multirow}
\usepackage{needspace}
\usepackage{lscape}
% %\usepackage{fontspec} % xelatex only
\usepackage{hyperref} % must be the last one
\hypersetup{
    colorlinks=true,
    linkcolor=ocre,
    citecolor=ocre,
    urlcolor=ocre
}

\usepackage[skins,listings]{tcolorbox}

\definecolor{dkblue}{rgb}{0,0.1,0.5}
\definecolor{lightblue}{rgb}{0,0.5,0.5}
\definecolor{dkgreen}{rgb}{0,0.4,0}
\definecolor{dk2green}{rgb}{0.4,0,0}
\definecolor{dkviolet}{rgb}{0.6,0,0.8}
\definecolor{mantra}{rgb}{0.2,0.6,0.2}
\definecolor{gotcha}{rgb}{0.8,0.2,0}
\definecolor{ocre}{RGB}{243,102,25} %borrowed to Orange Book

\def\lstlanguagefiles{defManSSR.tex}
\lstset{language=SSR}

\newcommand{\mcbimpl}[1]{\lstinline/?$_{#1}$/}
\newcommand{\mcbimplm}[1]{\mbox{?}_{#1}}

\newcommand{\lib}[1]{\textsf{#1}}

\newcommand{\C}[1]{\mbox{\lstinline`#1`}}
\newcommand{\D}[1]{\mbox{\lstinline'#1'}}


\newcommand*\floor[1]{\left\lfloor{#1}\right\rfloor}


% %\let\L=\lstinline

% Highlights identifiers, |* id *| in underlined red, can we do better?
%\lstset{moredelim=[is][\color{red}\bfseries\ttfamily\underbar]{|*}{*|}}
\lstset{moredelim=[is][\ttfamily\uwave]{|==}{==|}}
\lstset{moredelim=[is][\ttfamily\underbar]{|--}{--|}}

\newcommand{\gotcha}[1]{
\begin{alert}
#1
\end{alert}
}

\newcommand{\mantra}[1]{
\begin{remark}
#1
\end{remark}
}

% \newbox{\devnull}
 \NewEnviron{coqdef}[1]{}

 \newcommand{\coqrun}[2]{}

\lstnewenvironment{coq}[2]{\mdframed[skipabove=10pt,
skipbelow=7pt,
rightline=false,
leftline=true,
topline=false,
bottomline=false,
linecolor=ocre,
innerleftmargin=5pt,
innerrightmargin=5pt,
innertopmargin=0pt,
leftmargin=0cm,
rightmargin=0cm,
linewidth=4pt,
innerbottommargin=0pt]\lstset{numbers=left,numberstyle=\tiny,xleftmargin=5mm}}{\endmdframed}


\lstnewenvironment{coqout}[2]{\mdframed[skipabove=10pt,
skipbelow=7pt,
rightline=false,
leftline=true,
topline=false,
bottomline=false,
linecolor=gray,
backgroundcolor=black!5,
innerleftmargin=5pt,
innerrightmargin=5pt,
innertopmargin=0pt,
leftmargin=0cm,
rightmargin=0cm,
linewidth=4pt,
innerbottommargin=0pt]}{\endmdframed}


\lstnewenvironment{coq-left}{
\vspace{\baselineskip}%
\noindent
\minipage{0.5\textwidth}%
\mdframed[skipabove=0pt,
skipbelow=7pt,
rightline=false,
leftline=true,
topline=false,
bottomline=false,
linecolor=ocre,
innerleftmargin=5pt,
innerrightmargin=5pt,
innertopmargin=0pt,
leftmargin=0cm,
rightmargin=0cm,
linewidth=4pt,
innerbottommargin=0pt]\lstset{numbers=left,numberstyle=\tiny,xleftmargin=5mm}%
}
{\endmdframed%
\endminipage%
}


\lstnewenvironment{coqout-right}{
\vspace{\baselineskip}%
\noindent
\minipage{0.5\textwidth}%
\mdframed[skipabove=0pt,
skipbelow=7pt,
rightline=false,
leftline=true,
topline=false,
bottomline=false,
linecolor=gray,
backgroundcolor=black!5,
innerleftmargin=5pt,
innerrightmargin=5pt,
innertopmargin=0pt,
leftmargin=0cm,
rightmargin=0cm,
linewidth=4pt,
innerbottommargin=0pt]%
}
{\endmdframed%
 \endminipage%
}

\newcommand{\cheatsep}[0]{\hspace{0.18\textwidth}%
\color{ocre}%
\rule{4pt}{4pt}%
\color{white}%
\rule{4pt}{4pt}%
\color{ocre}%
\rule{4pt}{4pt}%
\color{white}%
\rule{4pt}{4pt}%
\color{ocre}%
\rule{4pt}{4pt}%
\color{black}}

\lstnewenvironment{cheat}{\mdframed[skipabove=10pt,
skipbelow=7pt,
rightline=false,
leftline=true,
topline=false,
bottomline=false,
linecolor=ocre,
innerleftmargin=5pt,
innerrightmargin=5pt,
innertopmargin=0pt,
leftmargin=0cm,
rightmargin=0cm,
linewidth=4pt,
innerbottommargin=0pt]\lstset{numberstyle=\tiny}}{\endmdframed}


\lstnewenvironment{cheatout}{
\vspace{\baselineskip}%
\noindent
\minipage{0.22\textwidth}%
\mdframed[skipabove=0pt,
skipbelow=7pt,
rightline=false,
leftline=true,
topline=false,
bottomline=false,
linecolor=gray,
backgroundcolor=black!5,
innerleftmargin=5pt,
innerrightmargin=5pt,
innertopmargin=0pt,
leftmargin=0cm,
rightmargin=0cm,
linewidth=4pt,
innerbottommargin=0pt]%
}
{\endmdframed%
 \endminipage%
}

\newcommand{\mcbLEVELx}[0]{\color{ocre}$\star$\color{black}}
\newcommand{\mcbLEVELxx}[0]{\color{ocre}$\star\star$\color{black}}

% For current cheatsheets, to be fixed
\newcommand{\caveat}[1]{\color{ocre}{ caveat }\color{black} #1}

\newcommand{\somethingfollows}{\needspace{2\baselineskip}}

\newcommand{\ssrc}[2]{\somethingfollows\C{#1}
	
\setlength{\leftskip}{1.5em}

#2

\setlength{\leftskip}{0cm}\vspace{0.4em}}

